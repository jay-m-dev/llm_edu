<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tokenizer Prototype</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Tokenizer Prototype</h1>
        <p class="lede">A minimal, deterministic tokenizer with a visual token list.</p>
      </header>

      <div class="grid">
        <section class="panel">
          <label for="input">Input Text</label>
          <textarea id="input" spellcheck="false"></textarea>
        </section>

        <section class="panel panel-stack">
          <div class="token-header">
            <span>Tokens</span>
            <span>Count: <span id="token-count">0</span></span>
          </div>
          <div class="context-controls">
            <label class="context-label" for="context-size">Context size</label>
            <input id="context-size" class="context-input" type="number" min="0" max="200" value="12" />
          </div>
          <div id="token-list" class="token-list"></div>

          <div id="embedding-panel" class="embedding-panel">
            <div id="embedding-title" class="embedding-title"></div>
            <div id="embedding-bars" class="embedding-bars"></div>
          </div>

          <div id="attention-panel" class="attention-panel">
            <div class="attention-title">Attention Weights</div>
            <div id="attention-list" class="attention-list"></div>
          </div>

          <div id="pipeline-panel" class="pipeline-panel">
            <div class="pipeline-header">
              <div class="pipeline-title">Pipeline Output</div>
              <select id="pipeline-stage" class="pipeline-select"></select>
            </div>
            <div id="pipeline-list" class="pipeline-list"></div>
          </div>

          <div id="context-panel" class="context-panel">
            <div class="context-title">Context Window</div>
            <div class="context-grid">
              <div>
                <div class="context-subtitle">Active</div>
                <div id="context-active" class="context-list"></div>
              </div>
              <div>
                <div class="context-subtitle">Dropped</div>
                <div id="context-dropped" class="context-list context-dropped"></div>
              </div>
            </div>
          </div>

          <div id="sampling-panel" class="sampling-panel">
            <div class="sampling-header">
              <div class="sampling-title">Sampling</div>
              <div id="replay-indicator" class="replay-indicator">Replay: off</div>
            </div>
            <div class="sampling-controls">
              <label class="sampling-label" for="sampling-seed">Seed</label>
              <input id="sampling-seed" class="sampling-input" type="number" value="12345" />
              <label class="sampling-label" for="sampling-temp">Temperature</label>
              <input id="sampling-temp" class="sampling-input" type="number" step="0.1" min="0.1" value="1" />
              <label class="sampling-label" for="sampling-random">Randomness</label>
              <input id="sampling-random" class="sampling-input" type="number" step="0.05" min="0" max="1" value="0.2" />
              <button id="sampling-run" class="sampling-button" type="button">Sample</button>
            </div>
            <div class="sampling-actions">
              <button id="run-save" class="sampling-button" type="button">Record Run</button>
              <button id="run-replay" class="sampling-button" type="button">Replay Last</button>
            </div>
            <div id="sampling-result" class="sampling-result">No sample yet.</div>
            <div id="sampling-list" class="sampling-list"></div>
          </div>

          <div id="generation-panel" class="generation-panel">
            <div class="generation-header">
              <div class="generation-title">Token-by-Token</div>
              <div class="generation-status">
                Step: <span id="generation-step">0</span>
                | Current: <span id="generation-current">-</span>
              </div>
            </div>
            <div class="generation-controls">
              <button id="generation-play" class="generation-button" type="button">Play</button>
              <button id="generation-pause" class="generation-button" type="button">Pause</button>
              <button id="generation-step-btn" class="generation-button" type="button">Step</button>
            </div>
            <div id="generation-output" class="generation-output"></div>
            <div class="generation-probabilities">
              <div class="generation-prob-title">Step Probabilities</div>
              <div id="generation-prob-list" class="generation-prob-list"></div>
            </div>
            <div class="generation-attention">
              <div class="generation-prob-title">Step Attention</div>
              <div id="generation-attention-list" class="generation-prob-list"></div>
            </div>
          </div>

          <div id="replay-panel" class="generation-panel">
            <div class="generation-header">
              <div class="generation-title">Replay Mode</div>
              <div id="replay-status" class="generation-status">Idle</div>
            </div>
            <div class="generation-controls">
              <button id="replay-play" class="generation-button" type="button">Play</button>
              <button id="replay-pause" class="generation-button" type="button">Pause</button>
              <button id="replay-step" class="generation-button" type="button">Step</button>
              <label class="sampling-label" for="replay-speed">Speed</label>
              <input id="replay-speed" class="sampling-input" type="number" step="0.1" min="0.2" value="1" />
              <button id="replay-exit" class="generation-button" type="button">Exit Replay</button>
            </div>
            <div class="generation-output" id="replay-output"></div>
          </div>

          <div id="objectives-panel" class="generation-panel">
            <div class="generation-header">
              <div class="generation-title">Objectives</div>
              <button id="objectives-evaluate" class="generation-button" type="button">Evaluate</button>
            </div>
            <div id="objectives-list" class="objectives-list"></div>
          </div>

          <div id="diagnostics-panel" class="generation-panel">
            <div class="generation-header">
              <div class="generation-title">Diagnostics</div>
              <button id="diagnostics-evaluate" class="generation-button" type="button">Check</button>
            </div>
            <div id="diagnostics-list" class="diagnostics-list"></div>
          </div>

          <div id="scores-panel" class="generation-panel">
            <div class="generation-header">
              <div class="generation-title">Scores</div>
              <button id="scores-evaluate" class="generation-button" type="button">Score Run</button>
            </div>
            <div id="scores-list" class="scores-list"></div>
          </div>
        </section>
      </div>
    </div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
